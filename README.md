# sqkrs

Sequentially-Keyed Reachability Sampler (sqkrs, pronounced "squeakers")

`sqkrs` is a tool for monitoring and logging UDP flow quality.

It provides a client and server to identify and log inconsistencies in
UDP traffic, such as connection losses or out-of-order packets.

> Disclaimer: This project is in early stages, with features still in
> development and subject to change.

## Features

- Looks for out-of-order packets, packet loss, timeouts
- Minimal log output to highlight only UDP traffic inconsistencies
- Each message is authenticated with hash-based message authentication code
(HMAC), ensuring secure communications between client and server
- The HMAC secret is a configurable password which is autogenerated by the
server or set via the SQKRS_PW environment variable

## Installation

Before installation, [Rust](https://doc.rust-lang.org/cargo/getting-started/installation.html) must be installed.

```sh
git clone https://github.com/SeungKang/sqkrs
cd sqkrs
cargo install --path .
```

## Usage

### Overall Usage

```
Usage: sqkrs <COMMAND>

Commands:
  client   Launch the client
  server   Launch the server
  version  Print current version
  help     Print this message or the help of the given subcommand(s)

Options:
  -h, --help  Print help
```

### Client Usage

```
Usage: sqkrs client [OPTIONS] <ADDRESS>

Arguments:
  <ADDRESS>  Specify address of the server

Options:
  -v, --verbose      Enable logging of all sent and receive packets
  -b, --bind <BIND>  Specify address to bind to [default: 0.0.0.0:0]
  -h, --help         Print help
```

### Server Usage

```
Usage: sqkrs server [OPTIONS]

Options:
  -v, --verbose      Enable logging of all sent and receive packets
  -b, --bind <BIND>  Specify address to listen on for incoming packets [default: 0.0.0.0:55101]
  -h, --help         Print help
```

## Examples

Basic configuration:

```console
$ # on server computer
$ sqkrs server
2025/01/01 01:35:25Z password is: REDACTED
2025/01/01 01:35:25Z listening on 0.0.0.0:55101 for connections...

$ # on client computer
$ export SQKRS_PW=REDACTED
$ sqkrs client 192.168.1.2:55101
2025/01/26 17:45:48Z attempting to send initial message to server...
2025/01/26 17:45:48Z received initial server response
```

Custom client and server addresses:

```console
$ # on server computer
$ sqkrs server --bind 127.0.0.1:55111

$ # on client computer
$ export SQKRS_PW=REDACTED
$ sqkrs client --bind 127.0.0.1:2000 127.0.0.1:55111
```
